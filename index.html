<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.3.1/lib/p5.js"></script>
</head>

<body>

</body>

</html>



<script>

    let innerWidth = window.innerWidth;
    let innerHeight = 400;
    /*
    *   Vetor que vai tamnhos de altura de retangulos
    *   esses valores n√£o devem se repetir
    * 
    * 
    */

    var largura = 5;
    var vetor = [];
    var tamanho = Math.floor(innerWidth / largura);
    function setup() {
        createCanvas(innerWidth, innerHeight);
        frameRate(5);
        while (vetor.length < tamanho) {
            let aleatorio = getRandomInt(0, innerHeight);
            if (!(vetor.includes(aleatorio))) vetor.push(aleatorio);
        }
    }

    function draw() {
        background(0, 0, 0);
        qcksrt(vetor, 0, vetor.length - 1);
        // vetor = [];
        // while (vetor.length < tamanho) {
        //     let aleatorio = getRandomInt(0, innerHeight);
        //     if (!(vetor.includes(aleatorio))) vetor.push(aleatorio);
        // }

        for (let i = 0; i < vetor.length; i++) {
                fill(0, 255, 0);
                rect(i * largura, innerHeight, largura, -vetor[i]);
        }
    }

    async function separa(v, p, r) {
        await sleep(100)
        let c = v[r];
        let t, j = p;
        for (let k = p; k < r; ++k) {
            if (v[k] <= c) {
                t = v[j];
                v[j] = v[k];
                v[k] = t;
                ++j;
            }
        }
        t = v[j];
        v[j] = v[r];
        v[r] = t;
        return j;
    }

    async function qcksrt(v, p, r) {
        while (p < r) {
            let j = await separa(v, p, r);
            await qcksrt(v, p, j - 1);
            p = j + 1;
            
        }
    }
    function sleep(ms){
        return new Promise(r=> setTimeout(r,ms));
    }
    function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min)) + min;
    }


</script>